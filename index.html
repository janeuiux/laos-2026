<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow"> 
    <title>Laos 2026 原味寮國</title>
    <!-- 引入 Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,400..900&family=Lato:wght@300;400;700&family=Noto+Serif+TC:wght@300;500;700&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Cropper.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <style>
        /* --- 基礎設定 --- */
        @font-face {
            font-family: 'Swei Spring Sugar';
            src: url('https://cdn.jsdelivr.net/gh/max-32002/swei-spring-sugar@master/web/SweiSpringSugarCJKtc-Regular.woff2') format('woff2');
            font-weight: normal; font-style: normal; font-display: swap;
        }

        :root {
            --bg-color: #F4F1EA;
            --primary: #1B263B;
            --accent: #8E3535;
            --gold: #C5A065;
            --text: #2F2F2F;
            --white: #FFFFFF;
            --font-en: 'Bodoni Moda', serif; 
            --font-hand: 'Dancing Script', cursive;
            --font-zh: 'Lato', 'Swei Spring Sugar', 'Noto Serif TC', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: var(--font-zh); background-color: var(--bg-color); color: var(--text); line-height: 1.8; 
            background-image: linear-gradient(var(--bg-color) 2px, transparent 2px), linear-gradient(90deg, var(--bg-color) 2px, transparent 2px);
            background-size: 40px 40px; background-position: -2px -2px; letter-spacing: 0.06em; font-weight: 300;
        }
        h1, h2, h3, h4 { font-family: var(--font-en); font-weight: 500; letter-spacing: normal; }
        
        .divider {
            text-align: center; margin: 60px 0; color: var(--gold); font-size: 1.5rem; position: relative; font-family: var(--font-zh); letter-spacing: 0.2em;
        }
        .divider::before, .divider::after {
            content: ''; display: inline-block; width: 50px; height: 1px; background: var(--gold); vertical-align: middle; margin: 0 15px;
        }

        /* --- Hero --- */
        .hero {
            height: 100vh; width: 100%; position: relative; display: flex; align-items: center; justify-content: center;
            background-image: url("https://i.pinimg.com/1200x/ad/29/b4/ad29b476ce5fd7e7bffbf6b8245d0ce0.jpg");
            background-size: cover; background-position: center; border-bottom: 8px solid var(--primary);
        }
        .hero::after { content: ''; position: absolute; inset: 0; background: rgba(0, 0, 0, 0.5); }
        .hero-frame { position: relative; z-index: 2; padding: 20px; text-align: center; color: var(--white); max-width: 900px; text-shadow: none; }
        .hero-en { font-family: var(--font-en); font-style: normal; font-size: 1.5rem; color: rgba(255,255,255,0.95); display: block; margin-bottom: 10px; letter-spacing: 0.1em; }
        .hero h1 { font-family: var(--font-en); font-size: 4rem; letter-spacing: 0.05em; margin-bottom: 10px; font-weight: 500; color: var(--white); text-shadow: none; line-height: 1.2; }
        .hero-travelers { font-family: var(--font-en); font-size: 0.9rem; color: rgba(255,255,255,0.9); margin-top: 15px; letter-spacing: 0.2em; font-weight: 300; text-transform: uppercase; font-style: normal; }

        /* --- Navigation & Search --- */
        .top-nav {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 40px; transition: 0.3s;
        }
        .top-nav.scrolled { background-color: var(--primary); padding: 10px 40px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        
        .nav-links-group { display: flex; gap: 30px; align-items: center; }
        
        .nav-link {
            color: var(--white); text-decoration: none; font-family: var(--font-zh); font-size: 1.1rem;
            letter-spacing: 0.1em; border-bottom: 2px solid transparent; transition: 0.3s; cursor: pointer;
        }
        .nav-link:hover { color: var(--gold); border-bottom-color: var(--gold); }
        
        /* Search Box */
        .search-container { position: relative; }
        .search-input {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); color: white;
            padding: 5px 10px 5px 35px; border-radius: 20px; font-family: var(--font-zh); outline: none; width: 150px; transition: 0.3s;
        }
        .search-input:focus { width: 220px; background: rgba(255,255,255,0.2); border-color: var(--gold); }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: rgba(255,255,255,0.7); font-size: 0.8rem; }
        
        .nav-item { position: relative; }
        .nav-trigger { display: flex; align-items: center; gap: 5px; }
        .dropdown-menu {
            display: none; position: absolute; top: 100%; right: 0;
            background-color: var(--primary); min-width: 180px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3); margin-top: 10px; border-radius: 2px;
        }
        .nav-item:hover .dropdown-menu { display: block; }
        .dropdown-item {
            display: block; padding: 12px 20px; color: var(--white); text-decoration: none;
            font-family: var(--font-zh); font-size: 0.95rem; border-bottom: 1px solid rgba(197, 160, 101, 0.2);
            transition: 0.3s;
        }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { background-color: rgba(197, 160, 101, 0.15); padding-left: 25px; }

        /* --- Intro --- */
        .section-container { max-width: 1000px; margin: 80px auto; padding: 0 20px; }
        .intro-text h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 30px; text-align: center; font-family: var(--font-zh); }
        .intro-text p { margin-bottom: 20px; font-size: 1.05rem; text-align: justify; max-width: 800px; margin-left: auto; margin-right: auto;}
        .drop-cap { float: left; font-family: var(--font-en); font-size: 3.5rem; line-height: 0.8; padding-right: 10px; color: var(--accent); }

        /* --- Horizontal Summary Timeline --- */
        .summary-section {
            background-color: #fff; padding: 40px 0 60px;
            border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; overflow: hidden;
        }
        .summary-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .summary-header { display: none; }
        .summary-scroller {
            display: flex; overflow-x: auto; gap: 20px; padding-bottom: 20px;
            scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;
        }
        .summary-scroller::-webkit-scrollbar { height: 6px; }
        .summary-scroller::-webkit-scrollbar-thumb { background: rgba(27, 38, 59, 0.2); border-radius: 3px; }
        .summary-card {
            flex: 0 0 220px; background: var(--bg-color); border: 1px solid var(--gold);
            padding: 25px 20px; text-align: center; scroll-snap-align: start;
            transition: 0.3s; cursor: pointer; text-decoration: none; display: block; border-radius: 2px;
        }
        .summary-card:hover { background: var(--primary); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .summary-day { font-family: var(--font-en); font-size: 2rem; color: var(--gold); margin-bottom: 5px; line-height: 1; }
        .summary-date { font-family: var(--font-en); font-size: 0.85rem; color: #888; margin-bottom: 15px; display: block; }
        .summary-loc { font-family: var(--font-zh); font-size: 1rem; font-weight: 500; color: var(--text); transition: color 0.3s; }
        .summary-card:hover .summary-date, .summary-card:hover .summary-loc { color: var(--white); }

        /* --- 4. Timeline --- */
        .timeline-section { background-color: var(--white); padding: 60px 0; border-top: 1px solid #ddd; }
        .day-anchor { scroll-margin-top: 80px; }
        .day-card { max-width: 950px; margin: 0 auto 80px; border: 1px solid #E0E0E0; background: var(--bg-color); box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow: hidden; transition: 0.3s; }
        
        .day-header-block { background: var(--primary); color: var(--white); padding: 25px 40px 20px; border-bottom: 4px solid var(--gold); display: block; }
        .day-title-top { font-family: var(--font-zh); font-size: 1.5rem; font-weight: 500; margin-bottom: 10px; color: var(--white); line-height: 1.3; }
        .day-meta-row { display: flex; justify-content: space-between; align-items: flex-end; }
        .day-header-left { display: flex; align-items: baseline; gap: 15px; }
        .day-num-big { font-family: var(--font-en); font-size: 2.5rem; color: var(--gold); margin-right: 0; font-style: normal; line-height: 1; }
        .day-date-tag { font-family: var(--font-en); font-size: 1.3rem; color: var(--white); opacity: 0.8; font-weight: 300; }
        
        .day-route-tag { 
            font-size: 0.9rem; background: rgba(255,255,255,0.1); 
            padding: 5px 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); 
            margin-bottom: 5px; 
        }
        
        .day-body { padding: 40px; }
        .day-summary-list { list-style: none; margin-bottom: 30px; padding-left: 10px; }
        .day-summary-list li { position: relative; padding-left: 25px; margin-bottom: 10px; font-size: 1.05rem; color: #444; font-weight: 400; }
        .day-summary-list li::before { content: '⚜'; position: absolute; left: 0; top: 4px; color: var(--gold); font-size: 0.8rem; }
        .btn-toggle-details { display: block; width: 100%; max-width: 250px; margin: 0 auto 30px; background: transparent; border: 1px solid var(--gold); color: var(--primary); font-family: var(--font-en); font-size: 0.9rem; padding: 12px 20px; cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 0.1em; display: flex; align-items: center; justify-content: center; gap: 10px; font-style: normal; }
        .btn-toggle-details:hover { background: var(--primary); color: var(--gold); border-color: var(--primary); }
        .btn-toggle-details.active { background: var(--primary); color: var(--white); }
        .btn-toggle-details.active i { transform: rotate(180deg); }
        .details-container { max-height: 0; overflow: hidden; opacity: 0; transition: max-height 0.8s, opacity 0.5s ease; }
        .details-container.open { opacity: 1; }
        .attraction-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 10px; padding-bottom: 10px; }
        .attraction-card { background: #fff; padding: 12px; box-shadow: 2px 4px 10px rgba(0,0,0,0.05); border: 1px solid #e0e0e0; display: flex; flex-direction: column; }
        .attraction-img { width: 100%; height: 200px; object-fit: cover; margin-bottom: 15px; filter: sepia(20%) contrast(90%); transition: filter 0.4s; border: 1px solid #eee; }
        .attraction-card:hover .attraction-img { filter: sepia(0%) contrast(100%); }
        .attraction-info h4 { color: var(--primary); font-size: 1.15rem; margin-bottom: 8px; border-bottom: 1px solid var(--gold); padding-bottom: 5px; display: inline-block; }
        .attraction-desc { 
            font-size: 0.9rem; color: #555; text-align: justify; line-height: 1.7; 
            max-height: 250px; overflow-y: auto; padding-right: 5px; /* Add scroll for very long text */
        }
        .attraction-desc::-webkit-scrollbar { width: 4px; }
        .attraction-desc::-webkit-scrollbar-thumb { background: #ccc; border-radius: 2px; }

        .day-footer { margin-top: 30px; padding-top: 20px; border-top: 1px dashed #ccc; display: flex; flex-direction: column; gap: 10px; color: #666; font-size: 0.9rem; }
        .day-footer i { color: var(--accent); margin-right: 8px; }
        
        /* Day Note */
        .day-note {
            background-color: rgba(244, 241, 234, 0.7); border-left: 3px solid var(--accent);
            padding: 15px; margin: 20px 0; color: #666; font-size: 0.9rem;
        }
        .day-note strong { color: var(--accent); }
        .day-text-block { margin-top: 20px; color: #555; font-size: 0.95rem; line-height: 1.7; }
        .day-text-block h5 { color: var(--primary); font-size: 1rem; margin-bottom: 5px; font-weight: 700; border-bottom: 1px dashed #ddd; display: inline-block; }
        .day-text-block em { color: var(--accent); font-style: normal; display: block; margin-top: 10px; font-size: 0.9rem; }

        /* --- Travelogue Creator --- */
        .travelogue-section { background: var(--bg-color); padding: 80px 20px; }
        .form-title { text-align: center; color: var(--primary); font-size: 1.8rem; margin-bottom: 30px; font-family: var(--font-zh); }
        .travelogue-form-container { background: var(--white); padding: 40px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-bottom: 60px; position: relative; max-width: 800px; margin: 0 auto; }
        .travelogue-form-container::before { content: ''; position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px; border: 1px solid var(--gold); pointer-events: none; }
        
        .notice-box { background-color: rgba(255, 248, 225, 0.9); border: 1px solid #e0e0e0; border-left: 4px solid var(--gold); padding: 15px; margin-bottom: 20px; font-size: 0.95rem; color: #666; display: flex; align-items: center; gap: 15px; }
        .notice-box i { color: var(--gold); font-size: 1.5rem; }

        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; color: var(--text); font-weight: 400; }
        .required { color: #d9534f; margin-left: 3px; font-weight: bold; }
        
        .form-input, .form-textarea, .form-select { 
            width: 100%; padding: 12px; border: 1px solid #ccc; font-family: var(--font-zh); font-size: 1rem; background: #fafafa; transition: border-color 0.3s; 
            box-sizing: border-box; height: 48px;
        }
        .form-textarea { height: auto; }

        .form-select {
            appearance: none; -webkit-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat; background-position: right 12px center; background-size: 16px; padding-right: 40px;
        }
        input[type="date"]::-webkit-calendar-picker-indicator { cursor: pointer; margin-right: 2px; }
        .form-input:focus, .form-textarea:focus, .form-select:focus { outline: none; border-color: var(--primary); }
        .file-upload-wrapper { position: relative; overflow: hidden; display: inline-block; width: 100%; }
        .btn-upload { 
            display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;
            border: 2px solid var(--primary); color: var(--primary); background: #fff; 
            padding: 12px 20px; cursor: pointer; font-family: var(--font-zh); font-size: 1rem; font-weight: 500;
            transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-radius: 4px;
        }
        .btn-upload:hover { background: var(--primary); color: white; box-shadow: 0 4px 8px rgba(0,0,0,0.15); }

        .btn-submit { background: var(--primary); color: var(--gold); border: none; padding: 12px 30px; font-size: 1rem; cursor: pointer; width: 100%; font-family: var(--font-en); letter-spacing: 0.1em; text-transform: uppercase; transition: 0.3s; margin-top: 20px; font-style: normal; }
        .btn-submit:hover { background: #2c3e50; }
        
        .radio-group { display: flex; gap: 20px; align-items: center; height: 48px; }
        .radio-label { display: flex; align-items: center; cursor: pointer; font-family: var(--font-zh); font-size: 1rem; }
        .radio-label input { margin-right: 8px; accent-color: var(--primary); width: 18px; height: 18px; }
        
        .format-selector { display: flex; gap: 15px; margin-bottom: 10px; }
        .btn-format { 
            flex: 1; padding: 15px; border: 1px solid #ccc; background: white; cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;
            transition: 0.3s;
        }
        .btn-format.active { background: #f0f4f8; border-color: var(--primary); color: var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .icon-vertical { width: 20px; height: 28px; border: 2px solid currentColor; border-radius: 2px; }
        .icon-horizontal { width: 28px; height: 20px; border: 2px solid currentColor; border-radius: 2px; }
        .format-text { font-family: var(--font-zh); font-size: 0.9rem; }
        
        .textarea-wrapper { position: relative; }
        .char-counter { position: absolute; bottom: 10px; right: 10px; font-size: 0.8rem; color: #999; }

        /* Generated Card Section */
        #generatedCardSection { display: none; flex-direction: column; align-items: center; margin-top: 40px; animation: fadeIn 0.5s ease; }
        #generatedCardSection.show { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .result-actions { display: flex; gap: 20px; margin-top: 30px; flex-wrap: wrap; justify-content: center; }
        .btn-action { padding: 12px 25px; border: none; cursor: pointer; font-family: var(--font-zh); font-size: 1rem; display: flex; align-items: center; gap: 8px; transition: 0.3s; border-radius: 4px; }
        .btn-download { background: var(--gold); color: white; }
        .btn-download:hover { background: #b08d55; }
        .btn-edit { background: var(--primary); color: white; } /* Back to Edit */
        .btn-reset { background: transparent; border: 1px solid #ccc; color: #666; }
        .btn-reset:hover { background: #f0f0f0; }

        /* Review Card Styles */
        .review-card { background: #fff; padding: 15px 15px 40px 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 1px solid #e0e0e0; display: flex; margin: 0 auto; transition: transform 0.3s; }
        
        /* Vertical */
        .review-card.vertical { flex-direction: column; width: 100%; max-width: 350px; }
        .review-card.vertical .review-img-container { width: 100%; height: auto; min-height: 250px; margin-bottom: 15px; }
        .review-card.vertical .review-content { width: 100%; }
        
        /* Horizontal */
        .review-card.horizontal { flex-direction: row; width: 100%; max-width: 650px; padding: 15px; min-height: 350px; height: auto; align-items: stretch; }
        .review-card.horizontal .review-img-container { width: 55%; height: auto; margin-bottom: 0; margin-right: 15px; min-height: 300px; display: flex; align-items: center; }
        .review-card.horizontal .review-content { width: 45%; padding-top: 10px; display: flex; flex-direction: column; justify-content: center; }
        
        .review-img-container { background: #eee; border: 1px solid #eee; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .review-media-item { width: 100%; height: 100%; object-fit: cover; display: block; }
        
        .review-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px dashed #ccc; padding-bottom: 5px; width: 100%; }
        .review-date { font-family: var(--font-hand); color: #888; font-size: 0.9rem; margin-bottom: 0; }
        .review-location { font-size: 0.9rem; color: var(--gold); font-family: var(--font-zh); font-weight: 400; display: flex; align-items: center; gap: 4px; }
        .review-text { font-family: var(--font-zh); font-size: 1rem; color: #444; line-height: 1.6; margin-bottom: 10px; min-height: 60px; white-space: pre-wrap; word-break: break-word; flex-grow: 1; }
        .review-author { font-family: var(--font-hand); font-weight: 500; color: var(--primary); text-align: right; font-size: 1.5rem; font-style: normal; width: 100%; }

        /* Cropper Modal */
        #cropperModal { display: none; position: fixed; z-index: 2500; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); align-items: center; justify-content: center; flex-direction: column; }
        #cropperModal.show { display: flex; }
        .cropper-wrapper { max-width: 90%; max-height: 70vh; margin-bottom: 20px; overflow: hidden; }
        .cropper-wrapper img { max-width: 100%; display: block; }
        .cropper-controls { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .btn-ratio { padding: 8px 15px; cursor: pointer; border: 1px solid #fff; background: transparent; color: #fff; transition: 0.3s; }
        .btn-ratio:hover, .btn-ratio.active { background: var(--gold); border-color: var(--gold); color: var(--primary); }
        .btn-confirm-crop { padding: 10px 25px; cursor: pointer; border: none; background: var(--primary); color: var(--gold); font-weight: bold; border: 1px solid var(--gold); }
        .btn-edit-crop { 
            margin-left: 10px; padding: 5px 10px; font-size: 0.8rem; cursor: pointer; 
            border: 1px solid #ccc; background: #fff; color: var(--text); border-radius: 4px;
        }
        .btn-edit-crop:hover { background: #f0f0f0; }

        /* --- Prep Section (Q&A) --- */
        .prep-section { padding: 80px 20px; background-color: #fdfbf7; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E"); }
        .prep-container { max-width: 800px; margin: 0 auto; }
        .qa-item { margin-bottom: 20px; border-bottom: 1px solid #e0e0e0; }
        .qa-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; cursor: pointer; }
        .qa-title { font-family: var(--font-zh); font-size: 1.2rem; color: var(--primary); font-weight: 500; display: flex; align-items: center; gap: 10px; }
        .qa-title i { color: var(--gold); font-size: 0.9rem; }
        .qa-toggle-icon { color: #aaa; transition: transform 0.3s; }
        .qa-item.active .qa-toggle-icon { transform: rotate(180deg); color: var(--primary); }
        .qa-body { max-height: 0; overflow: hidden; transition: max-height 0.4s ease; }
        .qa-content { padding: 10px 0 25px 30px; color: #555; line-height: 1.7; font-size: 1rem; }
        .qa-content ul { padding-left: 20px; }
        .highlight-text { color: var(--accent); font-weight: 500; }
        .qa-content a { color: var(--accent); text-decoration: none; border-bottom: 1px dotted var(--accent); transition: 0.3s; }
        .qa-content a:hover { color: var(--primary); border-bottom-style: solid; }
        .qa-content .hotel-address { display: block; font-size: 0.85rem; color: #888; margin-top: 2px; }

        /* Footer */
        footer { background: var(--primary); color: rgba(255,255,255,0.6); padding: 40px 20px; text-align: center; border-top: 5px solid var(--gold); }
        .footer-logo { font-family: var(--font-en); font-size: 1.8rem; color: var(--white); margin-bottom: 10px; font-style: normal; letter-spacing: 0.05em; }

        /* Lock Screen */
        #lockScreen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--primary); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--gold); transition: opacity 0.8s ease-out; }
        .lock-content h2 { font-size: 2.5rem; margin-bottom: 20px; color: var(--white); font-weight: 400; letter-spacing: 0.1em; }
        .lock-input { padding: 10px; border: 1px solid var(--gold); background: transparent; color: var(--white); font-size: 1.2rem; text-align: center; letter-spacing: 0.2em; margin-bottom: 20px; outline: none; width: 200px; font-family: var(--font-en); }
        .lock-btn { background: var(--gold); color: var(--primary); border: none; padding: 10px 30px; font-size: 1rem; cursor: pointer; text-transform: uppercase; font-weight: bold; transition: 0.3s; letter-spacing: 0.1em; font-family: var(--font-en); }
        .lock-btn:hover { background: var(--white); }

        /* Confirmation Modal for Reset */
        #resetConfirmModal { display: none; position: fixed; z-index: 2100; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); align-items: center; justify-content: center; }
        #resetConfirmModal.show { display: flex; }
        .modal-content { background-color: #fefefe; padding: 20px; border: 1px solid #888; width: 90%; max-width: 500px; position: relative; text-align: center; border-radius: 4px; }
        .modal-close { position: absolute; right: 15px; top: 10px; color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
        .modal-actions { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        
        @media (max-width: 768px) {
            .hero h1 { font-size: 3rem; }
            .top-nav { gap: 15px; padding: 15px 20px; }
            .search-container { display: none; } 
            .day-header-block { padding: 20px; }
            .day-header-left { flex-direction: column; align-items: flex-start; gap: 5px; }
            .attraction-grid { grid-template-columns: 1fr; }
            .review-card.horizontal { flex-direction: column; height: auto; }
            .review-card.horizontal .review-img-container { width: 100%; height: 250px; margin-right: 0; margin-bottom: 15px; }
            .review-card.horizontal .review-content { width: 100%; padding: 0 5px; }
        }
    </style>
</head>
<body>

    <!-- Lock Screen -->
    <div id="lockScreen">
        <div class="lock-content">
            <h2>Journey to Laos</h2>
            <input type="password" id="passcodeInput" class="lock-input" placeholder="Passcode">
            <br>
            <button class="lock-btn" onclick="checkPasscode()">Enter</button>
        </div>
    </div>

    <!-- Cropper Modal -->
    <div id="cropperModal">
        <div class="cropper-wrapper">
            <img id="cropperImage" src="" alt="Image to crop">
        </div>
        <div class="cropper-controls">
            <!-- Forced 1:1, ratio buttons removed -->
            <button class="btn-confirm-crop" onclick="finishCrop()">確認裁切 (Confirm)</button>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="resetConfirmModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeResetModal()">&times;</span>
            <h3>確定要製作下一張嗎？</h3>
            <p style="margin: 15px 0; color: #666;">尚未下載的明信片將會消失。</p>
            <div class="modal-actions">
                <button class="btn-action btn-download" onclick="downloadGeneratedCard()">
                    <i class="fa-solid fa-download"></i> 先下載
                </button>
                <button class="btn-action btn-reset" onclick="confirmReset()" style="background-color: var(--primary); color: white; border: none;">
                    <i class="fa-solid fa-check"></i> 確定重置
                </button>
            </div>
        </div>
    </div>

    <!-- Hero -->
    <header class="hero">
        <nav class="top-nav">
            <div class="nav-links-group">
                <a href="#intro" class="nav-link">簡介</a>
                <div class="nav-item">
                    <div class="nav-link nav-trigger">
                        行程 <i class="fa-solid fa-caret-down" style="font-size: 0.8em;"></i>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#day1" class="dropdown-item">Day1 龍坡邦</a>
                        <a href="#day2" class="dropdown-item">Day2 龍坡邦</a>
                        <a href="#day3" class="dropdown-item">Day3 龍坡邦</a>
                        <a href="#day4" class="dropdown-item">Day4 旺陽</a>
                        <a href="#day5" class="dropdown-item">Day5 永珍</a>
                        <a href="#day6" class="dropdown-item">Day6 永珍</a>
                        <a href="#day7" class="dropdown-item">Day7 返家</a>
                    </div>
                </div>
                <a href="#travelogue" class="nav-link">製作明信片</a>
                <a href="#preparation" class="nav-link">行前</a>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <i class="fa-solid fa-magnifying-glass search-icon"></i>
                <input type="text" class="search-input" id="siteSearch" placeholder="搜尋..." onkeyup="performSearch()">
            </div>
        </nav>

        <div class="hero-frame">
            <h1>Journey to Laos 2026</h1>
            <div class="hero-travelers">Traveller：Nina & Jane</div>
        </div>
    </header>

    <!-- Intro -->
    <section id="intro" class="section-container">
        <div class="intro-text">
            <h2>最後的天堂</h2>
            <p><span class="drop-cap">寮</span>國古稱【老撾】為中南半島唯一內陸國家。東與越南接鄰、南鄰柬埔寨、西接泰國、西北接緬甸、北與中國雲南省為界。寮國面積236,000平方公里，有658萬人口的虔誠佛教國家。龍坡邦在六百多年前，於此地建立起寮國第一個王朝，數百年來，不論世局如何演變，在寮國人心目中是個永恆的國都。</p>
        </div>
    </section>

    <!-- Horizontal Summary Timeline -->
    <section class="summary-section">
        <div class="summary-container">
            <div class="summary-scroller">
                <a href="#day1" class="summary-card">
                    <div class="summary-day">D1</div>
                    <span class="summary-date">02/16</span>
                    <div class="summary-loc">龍坡邦</div>
                </a>
                <a href="#day2" class="summary-card">
                    <div class="summary-day">D2</div>
                    <span class="summary-date">02/17</span>
                    <div class="summary-loc">龍坡邦</div>
                </a>
                <a href="#day3" class="summary-card">
                    <div class="summary-day">D3</div>
                    <span class="summary-date">02/18</span>
                    <div class="summary-loc">龍坡邦</div>
                </a>
                <a href="#day4" class="summary-card">
                    <div class="summary-day">D4</div>
                    <span class="summary-date">02/19</span>
                    <div class="summary-loc">旺陽</div>
                </a>
                <a href="#day5" class="summary-card">
                    <div class="summary-day">D5</div>
                    <span class="summary-date">02/20</span>
                    <div class="summary-loc">永珍</div>
                </a>
                <a href="#day6" class="summary-card">
                    <div class="summary-day">D6</div>
                    <span class="summary-date">02/21</span>
                    <div class="summary-loc">永珍</div>
                </a>
                <a href="#day7" class="summary-card">
                    <div class="summary-day">D7</div>
                    <span class="summary-date">02/22</span>
                    <div class="summary-loc">返家</div>
                </a>
            </div>
        </div>
    </section>

    <div class="divider">每日行程</div>

    <!-- Timeline -->
    <section class="timeline-section" id="timelineSection">
        <!-- Day 1 -->
        <div id="day1" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">初見龍坡邦：古都夜色</h3>
                <div class="day-meta-row">
                    <div class="day-header-left">
                        <span class="day-num-big">01</span>
                        <span class="day-date-tag">02/16</span>
                    </div>
                    <span class="day-route-tag">台北 → 河內 → 龍坡邦 → 相通寺 → 苗族夜市</span>
                </div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list">
                    <li>集合於桃園國際機場，搭乘 VN579 (07:35-09:50) 前往河內轉機。</li>
                    <li>轉乘 VN931 (12:55-14:00) 飛往世界文化遺產「龍坡邦」。</li>
                    <li>參觀相通寺，欣賞寮國建築美學。</li>
                    <li>漫步苗族夜市，感受古都寧靜氛圍。</li>
                </ul>
                
                <div class="day-note notice-box">
                    <i class="fa-solid fa-circle-exclamation"></i>
                    <div>※ 龍坡邦及旺陽因為文化保護，政府規定大車無法進去市區，需換小車或嘟嘟車，敬請見諒 !</div>
                </div>

                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container">
                    <div class="attraction-grid">
                        <div class="attraction-card">
                            <img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004554.PNG" class="attraction-img">
                            <div class="attraction-info"><h4>相通寺</h4><p class="attraction-desc">此為龍坡邦最華麗又具代表性的寺廟，建於1560年，原作為皇室家廟之用，外人不得進入，如今她也因為獨特的龍坡邦式建築，被譽為寮國境內最美麗的廟宇，主牆後面的生命之樹鑲嵌畫，不容錯過。此寺最大的特點便是屋簷低垂至幾乎觸地，寺廟的後牆是用彩色馬克鑲嵌而成的生命樹；而建寺之初年代的臥佛，曾於1931年至巴黎展覽，之後供奉於永珍，直到1936年才重回龍坡邦。</p></div>
                        </div>
                        <div class="attraction-card">
                            <img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004558.PNG" class="attraction-img">
                            <div class="attraction-info"><h4>苗族夜市</h4><p class="attraction-desc">位於皇宮博物館附近，各式各樣攤販小店林立，大部分是少數民族的手工藝品和原始手工製品，很有特色價廉物美。可品嚐當地的椰子蛋糕、燒烤料理等小吃，新鮮又好玩。</p></div>
                        </div>
                    </div>
                </div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Pullman Luang Prabang</span><span><i class="fa-solid fa-utensils"></i> 早：機上簡餐｜午：河內機場(誤餐費US10)｜晚：竹子餐廳寮料理</span></div>
            </div>
        </article>
        
        <!-- Day 2 -->
        <div id="day2" class="day-anchor"></div>
        <article class="day-card searchable-card">
             <div class="day-header-block">
                <h3 class="day-title-top">皇宮與千佛洞：歷史巡禮</h3>
                <div class="day-meta-row">
                    <div class="day-header-left"><span class="day-num-big">02</span><span class="day-date-tag">02/17</span></div>
                    <span class="day-route-tag">龍坡邦→皇宮博物館→普西山→帕烏千佛洞(唐丁古洞)→釀酒村→織布村</span>
                </div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>參觀皇宮博物館。</li><li>登上普西山俯瞰古城。</li><li>乘船前往帕烏千佛洞。</li><li>造訪釀酒村與織布村。</li></ul>
                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container">
                    <div class="day-note notice-box">
                        <i class="fa-solid fa-circle-exclamation"></i>
                        <div>※備註:傳統寮式料理+歌舞表演如遇龍坡邦餐廳公休，將改於永珍餐廳觀賞享用。</div>
                    </div>
                     <div class="attraction-grid">
                        <div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004557.PNG" class="attraction-img"><div class="attraction-info"><h4>皇宮博物館</h4><p class="attraction-desc">原是法國殖民時期，法國人為寮國傀儡政權興建的皇宮，現在成為皇家博物館，所建的皇宮，占地廣大，除作宮廷建築展示外，也收藏有大量的佛教文物，內有當年瀾滄王朝鎮國寶物「邦波帕佛」。融合了法國新藝術與寮國本土元素，收藏數量龐大的文物，值得一看。</p></div></div>
                        <div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004559.PNG" class="attraction-img"><div class="attraction-info"><h4>普西山</h4><p class="attraction-desc">位於皇宮博物館對面的此座山，高約350公尺，隨著階梯而上至山頂則是一座「That Chom Si佛塔」，在此可俯視整個龍坡邦全景，是相當好的觀景台，另還可看到傳說中佛陀的腳印。(在普西山上可俯瞰古城全貌)</p></div></div>
                        <div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004556.PNG" class="attraction-img"><div class="attraction-info"><h4>帕烏千佛洞</h4><p class="attraction-desc">上朔湄公河，參觀上下兩個石窟；即塔丁石窟及塔蓬石窟，該洞是石灰岩洞，發現至今已有四百多年的歷史，入口內側的左邊有木雕水槽及一小座小屋，是供浴佛慶典所用，走進洞裡可看到佛像群，高度從10公分到一公尺半不等，據稱此洞穴曾供奉一尊巨大坐佛，但現已尋不著痕跡。後面還有一座更大的山洞，更增添了無比的神秘感。</p></div></div>
                        <div class="attraction-card"><img src="https://images.unsplash.com/photo-1569300669299-88005391da40?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>釀酒村</h4><p class="attraction-desc">在此可以看到米酒蒸餾的過程。前往湄公河畔欣賞依山傍水的美景，欣賞恬靜動人的田園風光。</p></div></div>
                        <div class="attraction-card"><img src="https://images.unsplash.com/photo-1596423984379-994541784964?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>巴洛紡織村</h4><p class="attraction-desc">欣賞傳統紡織編織的民俗技藝。</p></div></div>
                    </div>
                </div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Pullman Luang Prabang</span><span><i class="fa-solid fa-utensils"></i> 早餐：飯店 ｜ 午餐：蜀香中式 ｜ 晚餐：中/寮式料理</span></div>
            </div>
        </article>
        
        <!-- Day 3 -->
        <div id="day3" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">信仰與自然：布施與瀑布</h3>
                <div class="day-meta-row"><div class="day-header-left"><span class="day-num-big">03</span><span class="day-date-tag">02/18</span></div><span class="day-route-tag">龍坡邦→清晨化緣觀禮→騎大象→關西瀑布</span></div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>清晨觀禮化緣。</li><li>逛早市場。</li><li>大象體驗。</li><li>關西瀑布。</li></ul>
                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container">
                    <div class="day-note notice-box">
                         <i class="fa-solid fa-circle-exclamation"></i>
                        <div>安排讓您紓解身心壓力按摩1小時(不含小費約US2)。(若無法安排則改在旺陽或永珍按摩)</div>
                    </div>
                    <div class="attraction-grid">
                        <div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004555.PNG" class="attraction-img"><div class="attraction-info"><h4>觀禮化緣</h4><p class="attraction-desc">一早，前往『杉尼寺』供僧朝拜，以佛立國在生活融入了佛教生活。清晨不妨外出觀賞獨特的禮佛習俗。每天約清晨6點，天還沒亮，來自龍坡邦各大大小小寺廟合計200多個和尚，就會沿著大街小巷前往與皇宮位於同一條街上的杉尼寺聚集，打著赤腳，披著黃布圍成的袈裟，一批一批分次出發。由最德高望重的和尚領頭，數百名和尚開始沿街化緣，百姓們跪在街道兩旁，在和尚們經過眼前時，將準備好的食物擺入缽中，祈求佛祖庇祐此生。</p></div></div>
                        <div class="attraction-card"><img src="https://images.unsplash.com/photo-1622396347101-9a3d651c368d?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>大象體驗</h4><p class="attraction-desc">前往老外最喜歡的活動之一騎乘大象，欣賞鄉間景致之旅！大象帶您爬山涉水，體驗漫遊寮國山林田野的樂趣，最後並可餵食大象及拍照，是非常有趣難得經驗的活動。（如不騎乘可於大象村休息欣賞當地優美鄉村山林美景，恕無法退費!）</p></div></div>
                        <div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004560.PNG" class="attraction-img"><div class="attraction-info"><h4>關西瀑布</h4><p class="attraction-desc">位於郊區29公里外，瀑布發源於峭壁上的一個淺池，並形成一個 50m梯度的主瀑布。瀑布的水落下後彙集成大量青綠色的水池。水從山上奔瀉流下，形成3層的瀑布，最高的一層有將近100米，石灰岩地形的田梗形成瀑布一層接一層，最後匯入水池可以給遊客游泳。雨林遮陰景觀奇特，步行在雨林中心曠神怡、舒暢無比。</p></div></div>
                    </div>
                </div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Pullman Luang Prabang</span><span><i class="fa-solid fa-utensils"></i> 早餐：飯店享用 ｜ 午餐：新東方或金玉堂中式料理 ｜ 晚餐：L’Elephant Restaurant法式料理或Dyen Sabai 寮式燒烤</span></div>
            </div>
        </article>

        <!-- Day 4 -->
        <div id="day4" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">高鐵體驗：前往度假勝地</h3>
                <div class="day-meta-row"><div class="day-header-left"><span class="day-num-big">04</span><span class="day-date-tag">02/19</span></div><span class="day-route-tag">龍坡邦+++中老鐵路體驗+++老外渡假勝地—旺陽→寮式下午茶→南宋河漂流</span></div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>搭乘中老鐵路高鐵前往旺陽。</li><li>欣賞旺陽喀斯特山水田園風光。</li><li>南宋河獨木舟/機動船漂流體驗。</li><li>享用寮式下午茶，晚上自由探索露天酒吧。</li></ul>
                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container"><div class="attraction-grid"><div class="attraction-card"><img src="https://images.unsplash.com/photo-1678852309772-23c233267c7e?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>中老鐵路</h4><p class="attraction-desc">搭乘現代化高鐵「瀾滄號」，大幅縮短車程，在舒適的車廂內欣賞沿途壯麗的山景。</p></div></div><div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004552.PNG" class="attraction-img"><div class="attraction-info"><h4>旺陽山水</h4><p class="attraction-desc">擁有「小桂林」之稱，喀斯特地貌聳立於田園之間，是歐美背包客最愛的戶外天堂。</p></div></div><div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004553.PNG" class="attraction-img"><div class="attraction-info"><h4>南宋河漂流</h4><p class="attraction-desc">乘坐獨木舟或機動船順流而下，兩岸奇峰異石如畫卷般展開，享受悠閒的午後時光。</p></div></div></div></div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Tmark Resort Vang Vieng</span><span><i class="fa-solid fa-utensils"></i> 早：飯店享用 ｜ 午：中/寮式 ｜ 晚：蜀香中式</span></div>
            </div>
        </article>

        <!-- Day 5 -->
        <div id="day5" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">地心探險：天使洞穴至永珍</h3>
                <div class="day-meta-row"><div class="day-header-left"><span class="day-num-big">05</span><span class="day-date-tag">02/20</span></div><span class="day-route-tag">旺陽 ➔ 永珍</span></div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>探訪天使洞穴 (Tham Nang Fa) 鐘乳石奇景。</li><li>前往首都永珍，感受法式殖民色彩。</li><li>參觀萬象世貿中心。</li><li>傍晚漫步湄公河畔，眺望泰國邊境。</li></ul>
                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container"><div class="attraction-grid"><div class="attraction-card"><img src="https://images.unsplash.com/photo-1558550172-23c233267c7e?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>天使洞穴</h4><p class="attraction-desc">旺陽最新發現的鐘乳石洞，欣賞大自然鬼斧神工的石灰岩造型與內部夢幻的燈光秀。</p></div></div><div class="attraction-card"><img src="https://plus.unsplash.com/premium_photo-1661918458327-04664539f993?q=80&w=600&auto=format&fit=crop" class="attraction-img"><div class="attraction-info"><h4>永珍市區</h4><p class="attraction-desc">寮國首都，以法文命名的城市。漫步於湄公河畔，感受這座城市緩慢而浪漫的法式殖民色彩。</p></div></div></div></div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Double Tree by Hilton Vientiane</span><span><i class="fa-solid fa-utensils"></i> 晚：傳統料理+歌舞表演</span></div>
            </div>
        </article>

        <!-- Day 6 -->
        <div id="day6" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">永珍風華：金色榮耀</h3>
                <div class="day-meta-row"><div class="day-header-left"><span class="day-num-big">06</span><span class="day-date-tag">02/21</span></div><span class="day-route-tag">永珍</span></div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>參拜金色塔鑾 (Pha That Luang)。</li><li>登頂凱旋門 (Patuxai) 俯瞰市景。</li><li>走訪玉佛寺與施沙格寺，欣賞萬尊佛像。</li><li>探索香崑廟 (Buddha Park) 的奇幻佛像公園。</li></ul>
                <button class="btn-toggle-details" onclick="toggleDetails(this)">More <i class="fa-solid fa-plus"></i></button>
                <div class="details-container"><div class="attraction-grid"><div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004546.PNG" class="attraction-img"><div class="attraction-info"><h4>塔鑾</h4><p class="attraction-desc">寮國的國家象徵，金色的宏偉佛塔，傳說供奉著佛祖胸骨，是歷代皇室存放骨灰的聖地。</p></div></div><div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004545.PNG" class="attraction-img"><div class="attraction-info"><h4>凱旋門</h4><p class="attraction-desc">法寮混血建築，外觀似巴黎凱旋門，細部則為寮國神話浮雕。登頂可俯瞰永珍市區幾何美景。</p></div></div><div class="attraction-card"><img src="https://www1.loyaltytour.com.tw/eWeb_loyaltytour/IMGDB/000207/00004544.PNG" class="attraction-img"><div class="attraction-info"><h4>香崑廟</h4><p class="attraction-desc">充滿奇幻色彩的佛像公園，巨大的臥佛與「天堂地獄塔」展現了獨特的宗教藝術。</p></div></div></div></div>
                <div class="day-footer"><span><i class="fa-solid fa-bed"></i> Double Tree by Hilton Vientiane</span><span><i class="fa-solid fa-utensils"></i> 午：火鍋 ｜ 晚：廣東酒樓</span></div>
            </div>
        </article>

        <!-- Day 7 -->
        <div id="day7" class="day-anchor"></div>
        <article class="day-card searchable-card">
            <div class="day-header-block">
                <h3 class="day-title-top">歸途：再見，美麗的寮國</h3>
                <div class="day-meta-row"><div class="day-header-left"><span class="day-num-big">07</span><span class="day-date-tag">02/22</span></div><span class="day-route-tag">永珍 ➔ 胡志明 ➔ 台北</span></div>
            </div>
            <div class="day-body">
                <ul class="day-summary-list"><li>前往永珍機場，搭乘 VN921 (11:35-14:50)。</li><li>轉搭 VN570 (16:50-21:10) 返回台北。</li></ul>
                <div class="day-footer" style="justify-content: center;"><span><i class="fa-solid fa-plane"></i> VN921 / VN570</span></div>
            </div>
        </article>
    </section>

    <div class="divider">製作回憶明信片</div>

    <!-- Postcard Creator Section -->
    <section id="travelogue" class="travelogue-section">
        <div class="form-title">製作回憶明信片</div>
        
        <div class="travelogue-form-container">
            <div class="notice-box">
                <i class="fa-solid fa-circle-exclamation"></i>
                <div>
                    <strong>溫馨提醒：</strong> 此功能僅供製作並下載明信片，網頁重新整理後內容將會消失。<br>
                    製作完成後，請點擊下方的 <strong>「下載收藏」</strong> 按鈕！
                </div>
            </div>
            
            <!-- Creator Form -->
            <form id="travelForm" onsubmit="handleFormSubmit(event)">
                
                <div class="form-group">
                    <label class="form-label">版型 (Format)</label>
                    <div class="format-selector">
                        <button type="button" class="btn-format active" onclick="setFormat('vertical')">
                            <div class="icon-vertical"></div>
                            <span class="format-text">直式 (Vertical)</span>
                        </button>
                        <button type="button" class="btn-format" onclick="setFormat('horizontal')">
                            <div class="icon-horizontal"></div>
                            <span class="format-text">橫式 (Horizontal)</span>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">旅人 <span class="required">*</span></label>
                    <div class="radio-group">
                        <label class="radio-label"><input type="radio" name="travelerName" value="Nina" checked> Nina</label>
                        <label class="radio-label"><input type="radio" name="travelerName" value="Jane"> Jane</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">日期 <span class="required">*</span></label>
                    <input type="date" class="form-input" id="dateInput" required>
                </div>
                <div class="form-group">
                    <label class="form-label">地點 <span class="required">*</span></label>
                    <select id="locationSelect" class="form-select" onchange="toggleOtherLocation()" required>
                        <option value="" disabled selected>請選擇地點</option>
                        <optgroup label="龍坡邦 Luang Prabang">
                            <option value="龍坡邦 - 相通寺">龍坡邦 - 相通寺</option>
                            <option value="龍坡邦 - 苗族夜市">龍坡邦 - 苗族夜市</option>
                            <option value="龍坡邦 - 皇宮博物館">龍坡邦 - 皇宮博物館</option>
                            <option value="龍坡邦 - 普西山">龍坡邦 - 普西山</option>
                            <option value="龍坡邦 - 帕烏千佛洞">龍坡邦 - 帕烏千佛洞</option>
                            <option value="龍坡邦 - 釀酒村">龍坡邦 - 釀酒村</option>
                            <option value="龍坡邦 - 織布村">龍坡邦 - 織布村</option>
                            <option value="龍坡邦 - 關西瀑布">龍坡邦 - 關西瀑布</option>
                            <option value="龍坡邦 - 中老鐵路">龍坡邦 - 中老鐵路</option>
                            <option value="龍坡邦 - 觀禮化緣">龍坡邦 - 觀禮化緣</option>
                            <option value="龍坡邦 - 大象體驗">龍坡邦 - 大象體驗</option>
                        </optgroup>
                        <optgroup label="旺陽 Vang Vieng">
                            <option value="旺陽 - 南宋河">旺陽 - 南宋河</option>
                            <option value="旺陽 - 天使洞穴">旺陽 - 天使洞穴</option>
                            <option value="旺陽 - 旺陽山水">旺陽 - 旺陽山水</option>
                            <option value="旺陽 - 南宋河漂流">旺陽 - 南宋河漂流</option>
                        </optgroup>
                        <optgroup label="永珍 Vientiane">
                            <option value="永珍 - 萬象世貿中心">永珍 - 萬象世貿中心</option>
                            <option value="永珍 - 湄公河畔">永珍 - 湄公河畔</option>
                            <option value="永珍 - 塔鑾">永珍 - 塔鑾</option>
                            <option value="永珍 - 凱旋門">永珍 - 凱旋門</option>
                            <option value="永珍 - 玉佛寺">永珍 - 玉佛寺</option>
                            <option value="永珍 - 施沙格寺">永珍 - 施沙格寺</option>
                            <option value="永珍 - 香崑廟">永珍 - 香崑廟</option>
                            <option value="永珍 - 塔鑾寺">永珍 - 塔鑾寺</option>
                        </optgroup>
                        <option value="other">其他 (請自行輸入)</option>
                    </select>
                    <input type="text" id="otherLocationInput" class="form-input" style="display:none; margin-top: 10px;" placeholder="請輸入地點">
                </div>
                <div class="form-group">
                    <label class="form-label">旅遊心得 (最多120字) <span class="required">*</span></label>
                    <div class="textarea-wrapper">
                        <textarea class="form-textarea" id="textInput" rows="3" maxlength="120" required placeholder="寫下您的旅遊回憶..." oninput="updateCharCount(this)"></textarea>
                        <div id="charCount" class="char-counter">還剩 120 字</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">上傳照片 (僅限單張) <span class="required">*</span></label>
                    <div class="file-upload-wrapper">
                        <label for="photoInput" class="btn-upload"><i class="fa-solid fa-camera"></i> 選擇檔案</label>
                        <input type="file" id="photoInput" accept="image/*" required style="display:none;" onchange="openCropper(this)">
                        <span id="fileName" style="font-size: 0.9rem; color: #666; margin-left: 10px;"></span>
                        <!-- Thumbnail Preview in Form -->
                        <div id="formImagePreview" style="margin-top: 10px; display: none; align-items: flex-end; gap: 10px;">
                            <img id="previewThumb" src="" alt="Preview" style="max-width: 150px; border-radius: 4px; border: 1px solid #ddd; padding: 2px;">
                            <button type="button" class="btn-edit-crop" onclick="reCrop()"><i class="fa-solid fa-crop-simple"></i> 編輯裁切</button>
                        </div>
                    </div>
                </div>

                <button type="submit" id="submitBtn" class="btn-submit">生成並下載 (Generate & Download)</button>
            </form>

            <!-- Result Section (Hidden by default) -->
            <div id="generatedCardSection">
                <div class="divider" style="margin: 40px 0 20px;">成品預覽</div>
                <!-- The generated card will be injected here -->
                <div id="resultContainer"></div>
                
                <div class="result-actions">
                    <button class="btn-action btn-download" onclick="downloadGeneratedCard()">
                        <i class="fa-solid fa-download"></i> 下載收藏
                    </button>
                    <!-- Back to Edit button -->
                    <button class="btn-action btn-edit" onclick="backToEdit()">
                        <i class="fa-solid fa-pen"></i> 返回修改
                    </button>
                    <button class="btn-action btn-reset" onclick="triggerResetConfirm()">
                        <i class="fa-solid fa-rotate-right"></i> 製作下一張
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Preparation Section (Q&A Style) -->
    <div class="divider">行前準備</div>
    <section id="preparation" class="prep-section">
        <div class="form-title">行前須知</div>
        <div class="prep-container">
            <!-- QA Items (same as previous) -->
             <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-plane"></i> 班機時刻</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li><strong>去程 02/16 (一)：</strong><ul><li>台北 - 河內 (VN579) 07:35 - 09:50</li><li>河內 - 龍坡邦 (VN931) 12:55 - 14:00</li></ul></li><li><strong>回程 02/22 (日)：</strong><ul><li>永珍 - 胡志明 (VN921) 11:35 - 14:50</li><li>胡志明 - 台北 (VN570) 16:50 - 21:10</li></ul></li></ul></div></div>
            </div>
            <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-hotel"></i> 住宿飯店</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li><strong>龍坡邦 (D1-D3)：</strong><a href="https://www.pullman-luangprabang.com/" target="_blank">Pullman Luang Prabang Hotel</a><span class="hotel-address">Ban Pong Wanh, 06000 Luang Prabang, Laos</span>
                <p style="font-size: 0.9rem; color: #666; margin-top: 5px; line-height: 1.5;">是第一家進駐古城龍坡邦系列酒店，坐落於南康河與湄公河之間。這座古城自1995年起被UNESCO列為世界遺產，以儲存完善的建築、宗教與文化遺產聞名。</p></li><li><strong>旺陽 (D4)：</strong><a href="http://tmarkresortvangvieng.com/" target="_blank">Tmark Resort Vang Vieng</a><span class="hotel-address">Ban Savang, Vang Vieng, Laos</span></li><li><strong>永珍 (D5-D6)：</strong><a href="https://www.hilton.com/en/hotels/vtexodi-doubletree-vientiane/" target="_blank">Double Tree by Hilton Vientiane</a><span class="hotel-address">Rue Setthathilath, Vientiane, Laos</span></li></ul></div></div>
            </div>
            <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-passport"></i> 簽證與入境</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li>請攜帶 <span class="highlight-text">2吋相片兩張</span> 辦理落地簽。</li><li>若曾辦過寮簽，請攜帶舊簽證紙，移民官會少收一張相片。</li><li><span class="highlight-text">重要：</span>出境台灣請勿使用快速通關，除非護照上有蓋 e-Gate 章。</li><li>若護照無 e-Gate 章，寮國移民官無法判斷出境國家，可能當場罰款或拒絕入境。</li></ul></div></div>
            </div>
            <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-shield-halved"></i> 高鐵安檢規定</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li>中老鐵路安檢嚴格，<span class="highlight-text">禁止攜帶任何刀具</span>。</li><li>包括：瑞士刀、剪刀、美工刀、有尖口的指甲刀等尖銳物品。</li><li>若檢驗結果未符規定，將請當場配合丟棄處理。</li><li>行動電源請隨身攜帶 (不可托運)。</li><li>液體類隨身單瓶不超過 100ml。</li></ul></div></div>
            </div>
            <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-plug"></i> 實用資訊 (電壓/氣候/貨幣)</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li><strong>電壓：</strong>220V (兩孔圓形插座，建議帶轉接頭)。</li><li><strong>氣候：</strong>2月為乾季 (18-28°C)，早晚溫差大，建議帶薄外套。</li><li><strong>時差：</strong>比台灣慢 1 小時。</li><li><strong>貨幣：</strong>建議帶美金到當地兌換 KIP。在寮國無論飯店、商店、市集，寮幣、美金、泰幣皆適用。</li></ul></div></div>
            </div>
            <div class="qa-item">
                <div class="qa-header" onclick="toggleQA(this)"><span class="qa-title"><i class="fa-solid fa-address-book"></i> 聯絡資訊</span><i class="fa-solid fa-chevron-down qa-toggle-icon"></i></div>
                <div class="qa-body searchable-text"><div class="qa-content"><ul><li><strong>領隊：</strong>黃若璇 0932-649-439</li><li><strong>送機：</strong>曾仁杰 0910-008-139</li><li><strong>集合時間：</strong>2026年02月16日 04:35</li><li><strong>集合地點：</strong>桃園機場二航廈 越南航空團體櫃檯</li></ul></div></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-logo">Laos 2026｜Nina & Jane</div>
        <p class="footer-text">2026原味寮國之旅｜Designed by Into Design</p>
    </footer>

    <script>
        /* --- Lock Screen Logic --- */
        function checkPasscode() {
            const input = document.getElementById('passcodeInput').value;
            const lockScreen = document.getElementById('lockScreen');
            if (input === '2026') {
                lockScreen.style.opacity = '0';
                setTimeout(() => { lockScreen.style.display = 'none'; }, 800);
            } else {
                alert('密碼錯誤');
            }
        }

        // Add Enter key listener for passcode
        document.getElementById('passcodeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkPasscode();
        });
        
        // Scroll detection
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('.top-nav');
            if (window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');
        });

        function toggleDetails(button) {
            const container = button.nextElementSibling;
            button.classList.toggle('active');
            if (button.classList.contains('active')) {
                container.style.maxHeight = container.scrollHeight + "px";
                container.classList.add('open');
                button.innerHTML = 'More <i class="fa-solid fa-minus"></i>';
            } else {
                container.style.maxHeight = null;
                container.classList.remove('open');
                button.innerHTML = 'More <i class="fa-solid fa-plus"></i>';
            }
        }
        
        function toggleQA(header) {
            const item = header.parentElement;
            const body = header.nextElementSibling;
            item.classList.toggle('active');
            if (item.classList.contains('active')) {
                body.style.maxHeight = body.scrollHeight + "px";
            } else {
                body.style.maxHeight = null;
            }
        }

        /* --- Creator Logic (Single Card Generator + Cropper) --- */
        
        let cropper;
        let croppedImageDataURL = null; 
        let originalImageSrc = null; // Store original for re-cropping
        let currentFormat = 'vertical'; // Default

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('dateInput').valueAsDate = new Date();
            updateCharCount(document.getElementById('textInput'));
        });
        
        function updateCharCount(textarea) {
            const maxLength = textarea.getAttribute('maxlength');
            const currentLength = textarea.value.length;
            const remaining = maxLength - currentLength;
            document.getElementById('charCount').textContent = `還剩 ${remaining} 字`;
        }
        
        // Search Function
        function performSearch() {
            const query = document.getElementById('siteSearch').value.toLowerCase();
            const dayCards = document.querySelectorAll('.searchable-card');
            const qaItems = document.querySelectorAll('.qa-item');

            // Search Timeline
            dayCards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(query)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });

            // Search QA
            qaItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(query)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Set Format (Vertical/Horizontal)
        function setFormat(format) {
            currentFormat = format;
            document.querySelectorAll('.btn-format').forEach(btn => btn.classList.remove('active'));
            if (format === 'vertical') {
                document.querySelector('button[onclick="setFormat(\'vertical\')"]').classList.add('active');
            } else {
                document.querySelector('button[onclick="setFormat(\'horizontal\')"]').classList.add('active');
            }
        }

        function openCropper(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImageSrc = e.target.result; // Save for re-cropping
                    launchCropperModal(originalImageSrc);
                };
                reader.readAsDataURL(file);
                // Update file name text
                document.getElementById('fileName').textContent = file.name;
            }
        }
        
        function reCrop() {
            if (originalImageSrc) {
                launchCropperModal(originalImageSrc);
            }
        }
        
        function launchCropperModal(src) {
            const cropperImg = document.getElementById('cropperImage');
            cropperImg.src = src;
            
            document.getElementById('cropperModal').classList.add('show');
            
            // Initialize Cropper (destroy old instance if exists)
            if (cropper) cropper.destroy();
            cropper = new Cropper(cropperImg, {
                aspectRatio: 1, // Forced 1:1
                viewMode: 1,
                background: false
            });
        }

        function finishCrop() {
            // Get cropped canvas
            const canvas = cropper.getCroppedCanvas({
                width: 800, // Reasonable max width for quality
            });
            croppedImageDataURL = canvas.toDataURL();
            
            // Show thumbnail in form
            const previewContainer = document.getElementById('formImagePreview');
            const previewImg = document.getElementById('previewThumb');
            previewImg.src = croppedImageDataURL;
            previewContainer.style.display = 'flex'; // show container (flex for alignment)
            
            // Close modal
            document.getElementById('cropperModal').classList.remove('show');
            cropper.destroy();
            cropper = null;
        }

        function cancelCrop() {
            document.getElementById('cropperModal').classList.remove('show');
            if (cropper) {
                cropper.destroy();
                cropper = null;
            }
            // If we are just cancelling a re-crop, don't clear everything if an image exists
            if (!croppedImageDataURL) {
                document.getElementById('photoInput').value = ''; 
                document.getElementById('fileName').textContent = '';
                document.getElementById('formImagePreview').style.display = 'none';
            }
        }

        function toggleOtherLocation() {
            const select = document.getElementById('locationSelect');
            const otherInput = document.getElementById('otherLocationInput');
            if (select.value === 'other') {
                otherInput.style.display = 'block';
                otherInput.required = true;
            } else {
                otherInput.style.display = 'none';
                otherInput.required = false;
            }
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            const date = document.getElementById('dateInput').value;
            const nameRadio = document.querySelector('input[name="travelerName"]:checked');
            const name = nameRadio ? nameRadio.value : 'Anonymous';
            
            const locationSelect = document.getElementById('locationSelect');
            let location = locationSelect.value;
            if (location === 'other') location = document.getElementById('otherLocationInput').value;

            const text = document.getElementById('textInput').value;
            
            // Create card with current inputs and cropped image
            // Note: Image is required via HTML attribute, so croppedImageDataURL should exist
            createAndShowCard(name, text, croppedImageDataURL, location, date);
        }

        function createAndShowCard(name, text, imgSrc, location, date) {
            const resultContainer = document.getElementById('resultContainer');
            const resultSection = document.getElementById('generatedCardSection');
            
            // Format date
            const [y, m, d] = date.split('-');
            const formattedDate = `${y}/${parseInt(m)}/${parseInt(d)}`;
            
            // Default image fallback (should not happen if required)
            const finalImg = imgSrc || "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=600&auto=format&fit=crop";

            const cardClass = currentFormat === 'horizontal' ? 'review-card horizontal' : 'review-card vertical';

            // Generate HTML
            // Note: removed fixed height from review-img-container to adapt to cropped ratio
            const cardHTML = `
                <div class="${cardClass}" id="finalCard">
                    <div class="review-img-container" style="height: auto;">
                        <img src="${finalImg}" class="review-media-item" crossorigin="anonymous">
                    </div>
                    <div class="review-content">
                        <div class="review-header">
                            <div class="review-date">${formattedDate}</div>
                            <div class="review-location"><i class="fa-solid fa-location-dot"></i> ${location}</div>
                        </div>
                        <p class="review-text">${text}</p>
                        <div class="review-author">${name}</div>
                    </div>
                </div>
            `;
            
            resultContainer.innerHTML = cardHTML;
            resultSection.classList.add('show');
            
            // Hide Form
            document.getElementById('travelForm').style.display = 'none';
            resultSection.scrollIntoView({ behavior: 'smooth' });
            
            // Auto trigger download dialog (optional, or just show preview)
             setTimeout(() => {
                const modal = document.getElementById('shareModal');
                // We reuse share modal for preview after generation if desired, 
                // but currently we show inline. Let's keep inline preview.
             }, 500);
        }

        function downloadGeneratedCard() {
            const element = document.getElementById('finalCard');
            html2canvas(element, { useCORS: true, scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = `laos-memory-${Date.now()}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // Back to Edit Function
        function backToEdit() {
            document.getElementById('travelForm').style.display = 'block';
            document.getElementById('generatedCardSection').classList.remove('show');
            // Scroll back to form top
            document.getElementById('travelForm').scrollIntoView({ behavior: 'smooth' });
        }

        // Reset Confirm Logic
        function triggerResetConfirm() {
            document.getElementById('resetConfirmModal').classList.add('show');
        }
        
        function closeResetModal() {
             document.getElementById('resetConfirmModal').classList.remove('show');
        }

        function confirmReset() {
            closeResetModal();
            resetCreator();
        }

        function resetCreator() {
            document.getElementById('travelForm').reset();
            document.getElementById('travelForm').style.display = 'block';
            document.getElementById('generatedCardSection').classList.remove('show');
            document.getElementById('dateInput').valueAsDate = new Date(); 
            document.getElementById('fileName').textContent = "";
            document.getElementById('formImagePreview').style.display = 'none';
            document.getElementById('previewThumb').src = '';
            toggleOtherLocation();
            croppedImageDataURL = null; // Clear image buffer
            originalImageSrc = null;
            
            document.getElementById('travelForm').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
